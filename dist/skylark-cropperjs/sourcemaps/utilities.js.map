{"version":3,"sources":["utilities.js"],"names":["define","constants","isNaN","Number","WINDOW","isNumber","value","isPositiveNumber","Infinity","isObject","hasOwnProperty","Object","prototype","isFunction","slice","Array","toArray","from","call","forEach","data","callback","isArray","length","key","keys","assign","target","_len","arguments","args","_key","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","undefined","test","Math","round","REGEXP_SUFFIX","addClass","element","elem","classList","add","className","trim","indexOf","concat","removeClass","remove","replace","REGEXP_CAMEL_CASE","toParamCase","toLowerCase","REGEXP_SPACES","onceSupported","supported","IS_BROWSER","once","listener","options","defineProperty","get","set","addEventListener","removeEventListener","location","REGEXP_ORIGINS","getAdjustedSizes","_ref4","aspectRatio","height","width","type","isValidWidth","isValidHeight","adjustedWidth","fromCharCode","String","getStringFromCharCode","dataView","start","str","i","getUint8","REGEXP_DATA_URL_HEAD","isUndefined","isPlainObject","_constructor","constructor","error","setStyle","styles","style","property","hasClass","contains","toggleClass","added","getData","name","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","removeListener","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","apply","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","document","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","window","pageXOffset","documentElement","clientLeft","top","pageYOffset","clientTop","isCrossOriginURL","url","parts","match","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","values","push","transform","join","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","_objectSpread2","ratios","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","ratio","sort","a","b","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","canvas","createElement","context","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","params","fillStyle","fillRect","save","translate","scale","drawImage","map","param","floor","restore","dataURLToArrayBuffer","dataURL","base64","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","mimeType","chunks","subarray","btoa","resetAndGetOrientation","orientation","DataView","littleEndian","app1Start","ifdStart","byteLength","offset","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_offset","_length","setUint16","parseOrientation"],"mappings":"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","file":"../utilities.js","sourcesContent":["define(['./constants'], function (constants) {\n    'use strict';\n\n\n\n/**\n * Check if the given value is not a number.\n */\n\nvar isNaN = Number.isNaN || constants.WINDOW.isNaN;\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\n\nfunction isNumber(value) {\n  return typeof value === 'number' && !isNaN(value);\n}\n/**\n * Check if the given value is a positive number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n */\n\nvar isPositiveNumber = function isPositiveNumber(value) {\n  return value > 0 && value < Infinity;\n};\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\n\nfunction isUndefined(value) {\n  return typeof value === 'undefined';\n}\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\n\nfunction isObject(value) {\n  return typeof(value) === 'object' && value !== null;\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\n\nfunction isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  try {\n    var _constructor = value.constructor;\n    var prototype = _constructor.prototype;\n    return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n  } catch (error) {\n    return false;\n  }\n}\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nvar slice = Array.prototype.slice;\n/**\n * Convert array-like or iterable object to an array.\n * @param {*} value - The value to convert.\n * @returns {Array} Returns a new array.\n */\n\nfunction toArray(value) {\n  return Array.from ? Array.from(value) : slice.call(value);\n}\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\n\nfunction forEach(data, callback) {\n  if (data && isFunction(callback)) {\n    if (Array.isArray(data) || isNumber(data.length)\n    /* array-like */\n    ) {\n        toArray(data).forEach(function (value, key) {\n          callback.call(data, value, key, data);\n        });\n      } else if (isObject(data)) {\n      Object.keys(data).forEach(function (key) {\n        callback.call(data, data[key], key, data);\n      });\n    }\n  }\n\n  return data;\n}\n/**\n * Extend the given object.\n * @param {*} target - The target object to extend.\n * @param {*} args - The rest objects for merging to the target object.\n * @returns {Object} The extended object.\n */\n\nvar assign = Object.assign || function assign(target) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (isObject(target) && args.length > 0) {\n    args.forEach(function (arg) {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach(function (key) {\n          target[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return target;\n};\nvar REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n/**\n * Normalize decimal number.\n * Check out {@link http://0.30000000000000004.com/}\n * @param {number} value - The value to normalize.\n * @param {number} [times=100000000000] - The times for normalizing.\n * @returns {number} Returns the normalized number.\n */\n\nfunction normalizeDecimalNumber(value) {\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n  return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n}\nvar REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\n\nfunction setStyle(element, styles) {\n  var style = element.style;\n  forEach(styles, function (value, property) {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value = \"\".concat(value, \"px\");\n    }\n\n    style[property] = value;\n  });\n}\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\n\nfunction hasClass(element, value) {\n  return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n}\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\n\nfunction addClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  var className = element.className.trim();\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = \"\".concat(className, \" \").concat(value);\n  }\n}\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\n\nfunction removeClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\n\nfunction toggleClass(element, value, added) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      toggleClass(elem, value, added);\n    });\n    return;\n  } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n  if (added) {\n    addClass(element, value);\n  } else {\n    removeClass(element, value);\n  }\n}\nvar REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n/**\n * Transform the given string from camelCase to kebab-case\n * @param {string} value - The value to transform.\n * @returns {string} The transformed value.\n */\n\nfunction toParamCase(value) {\n  return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n}\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\n\nfunction getData(element, name) {\n  if (isObject(element[name])) {\n    return element[name];\n  }\n\n  if (element.dataset) {\n    return element.dataset[name];\n  }\n\n  return element.getAttribute(\"data-\".concat(toParamCase(name)));\n}\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\n\nfunction setData(element, name, data) {\n  if (isObject(data)) {\n    element[name] = data;\n  } else if (element.dataset) {\n    element.dataset[name] = data;\n  } else {\n    element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n  }\n}\n/**\n * Remove data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to remove.\n */\n\nfunction removeData(element, name) {\n  if (isObject(element[name])) {\n    try {\n      delete element[name];\n    } catch (error) {\n      element[name] = undefined;\n    }\n  } else if (element.dataset) {\n    // #128 Safari not allows to delete dataset property\n    try {\n      delete element.dataset[name];\n    } catch (error) {\n      element.dataset[name] = undefined;\n    }\n  } else {\n    element.removeAttribute(\"data-\".concat(toParamCase(name)));\n  }\n}\nvar REGEXP_SPACES = /\\s\\s*/;\n\nvar onceSupported = function () {\n  var supported = false;\n\n  if (constants.IS_BROWSER) {\n    var once = false;\n\n    var listener = function listener() {};\n\n    var options = Object.defineProperty({}, 'once', {\n      get: function get() {\n        supported = true;\n        return once;\n      },\n\n      /**\n       * This setter can fix a `TypeError` in strict mode\n       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n       * @param {boolean} value - The value to set\n       */\n      set: function set(value) {\n        once = value;\n      }\n    });\n    constants.WINDOW.addEventListener('test', listener, options);\n    constants.WINDOW.removeEventListener('test', listener, options);\n  }\n\n  return supported;\n}();\n/**\n * Remove event listener from the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\n\n\nfunction removeListener(element, type, listener) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var handler = listener;\n  type.trim().split(REGEXP_SPACES).forEach(function (event) {\n    if (!onceSupported) {\n      var listeners = element.listeners;\n\n      if (listeners && listeners[event] && listeners[event][listener]) {\n        handler = listeners[event][listener];\n        delete listeners[event][listener];\n\n        if (Object.keys(listeners[event]).length === 0) {\n          delete listeners[event];\n        }\n\n        if (Object.keys(listeners).length === 0) {\n          delete element.listeners;\n        }\n      }\n    }\n\n    element.removeEventListener(event, handler, options);\n  });\n}\n/**\n * Add event listener to the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\n\nfunction addListener(element, type, listener) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _handler = listener;\n  type.trim().split(REGEXP_SPACES).forEach(function (event) {\n    if (options.once && !onceSupported) {\n      var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n      _handler = function handler() {\n        delete listeners[event][listener];\n        element.removeEventListener(event, _handler, options);\n\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        listener.apply(element, args);\n      };\n\n      if (!listeners[event]) {\n        listeners[event] = {};\n      }\n\n      if (listeners[event][listener]) {\n        element.removeEventListener(event, listeners[event][listener], options);\n      }\n\n      listeners[event][listener] = _handler;\n      element.listeners = listeners;\n    }\n\n    element.addEventListener(event, _handler, options);\n  });\n}\n/**\n * Dispatch event on the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Object} data - The additional event data.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\n\nfunction dispatchEvent(element, type, data) {\n  var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n  if (isFunction(Event) && isFunction(CustomEvent)) {\n    event = new CustomEvent(type, {\n      detail: data,\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, data);\n  }\n\n  return element.dispatchEvent(event);\n}\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\n\nfunction getOffset(element) {\n  var box = element.getBoundingClientRect();\n  return {\n    left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n    top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n  };\n}\nvar location = constants.WINDOW.location;\nvar REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n/**\n * Check if the given URL is a cross origin URL.\n * @param {string} url - The target URL.\n * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n */\n\nfunction isCrossOriginURL(url) {\n  var parts = url.match(REGEXP_ORIGINS);\n  return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n}\n/**\n * Add timestamp to the given URL.\n * @param {string} url - The target URL.\n * @returns {string} The result URL.\n */\n\nfunction addTimestamp(url) {\n  var timestamp = \"timestamp=\".concat(new Date().getTime());\n  return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n}\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\n\nfunction getTransforms(_ref) {\n  var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n  var values = [];\n\n  if (isNumber(translateX) && translateX !== 0) {\n    values.push(\"translateX(\".concat(translateX, \"px)\"));\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    values.push(\"translateY(\".concat(translateY, \"px)\"));\n  } // Rotate should come first before scale to match orientation transform\n\n\n  if (isNumber(rotate) && rotate !== 0) {\n    values.push(\"rotate(\".concat(rotate, \"deg)\"));\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    values.push(\"scaleX(\".concat(scaleX, \")\"));\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    values.push(\"scaleY(\".concat(scaleY, \")\"));\n  }\n\n  var transform = values.length ? values.join(' ') : 'none';\n  return {\n    WebkitTransform: transform,\n    msTransform: transform,\n    transform: transform\n  };\n}\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\n\nfunction getMaxZoomRatio(pointers) {\n  var pointers2 = _objectSpread2({}, pointers);\n\n  var ratios = [];\n  forEach(pointers, function (pointer, pointerId) {\n    delete pointers2[pointerId];\n    forEach(pointers2, function (pointer2) {\n      var x1 = Math.abs(pointer.startX - pointer2.startX);\n      var y1 = Math.abs(pointer.startY - pointer2.startY);\n      var x2 = Math.abs(pointer.endX - pointer2.endX);\n      var y2 = Math.abs(pointer.endY - pointer2.endY);\n      var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n      var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n      var ratio = (z2 - z1) / z1;\n      ratios.push(ratio);\n    });\n  });\n  ratios.sort(function (a, b) {\n    return Math.abs(a) < Math.abs(b);\n  });\n  return ratios[0];\n}\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\n\nfunction getPointer(_ref2, endOnly) {\n  var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n  var end = {\n    endX: pageX,\n    endY: pageY\n  };\n  \n  return endOnly ? end : ({\n    startX: pageX,\n    startY: pageY,\n    ...end,\n  });\n}\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\n\nfunction getPointersCenter(pointers) {\n  var pageX = 0;\n  var pageY = 0;\n  var count = 0;\n  forEach(pointers, function (_ref3) {\n    var startX = _ref3.startX,\n        startY = _ref3.startY;\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n  pageX /= count;\n  pageY /= count;\n  return {\n    pageX: pageX,\n    pageY: pageY\n  };\n}\n/**\n * Get the max sizes in a rectangle under the given aspect ratio.\n * @param {Object} data - The original sizes.\n * @param {string} [type='contain'] - The adjust type.\n * @returns {Object} The result sizes.\n */\n\nfunction getAdjustedSizes(_ref4) // or 'cover'\n{\n  var aspectRatio = _ref4.aspectRatio,\n      height = _ref4.height,\n      width = _ref4.width;\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n  var isValidWidth = isPositiveNumber(width);\n  var isValidHeight = isPositiveNumber(height);\n\n  if (isValidWidth && isValidHeight) {\n    var adjustedWidth = height * aspectRatio;\n\n    if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n      height = width / aspectRatio;\n    } else {\n      width = height * aspectRatio;\n    }\n  } else if (isValidWidth) {\n    height = width / aspectRatio;\n  } else if (isValidHeight) {\n    width = height * aspectRatio;\n  }\n\n  return {\n    width: width,\n    height: height\n  };\n}\n/**\n * Get the new sizes of a rectangle after rotated.\n * @param {Object} data - The original sizes.\n * @returns {Object} The result sizes.\n */\n\nfunction getRotatedSizes(_ref5) {\n  var width = _ref5.width,\n      height = _ref5.height,\n      degree = _ref5.degree;\n  degree = Math.abs(degree) % 180;\n\n  if (degree === 90) {\n    return {\n      width: height,\n      height: width\n    };\n  }\n\n  var arc = degree % 90 * Math.PI / 180;\n  var sinArc = Math.sin(arc);\n  var cosArc = Math.cos(arc);\n  var newWidth = width * cosArc + height * sinArc;\n  var newHeight = width * sinArc + height * cosArc;\n  return degree > 90 ? {\n    width: newHeight,\n    height: newWidth\n  } : {\n    width: newWidth,\n    height: newHeight\n  };\n}\n/**\n * Get a canvas which drew the given image.\n * @param {HTMLImageElement} image - The image for drawing.\n * @param {Object} imageData - The image data.\n * @param {Object} canvasData - The canvas data.\n * @param {Object} options - The options.\n * @returns {HTMLCanvasElement} The result canvas.\n */\n\nfunction getSourceCanvas(image, _ref6, _ref7, _ref8) {\n  var imageAspectRatio = _ref6.aspectRatio,\n      imageNaturalWidth = _ref6.naturalWidth,\n      imageNaturalHeight = _ref6.naturalHeight,\n      _ref6$rotate = _ref6.rotate,\n      rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n      _ref6$scaleX = _ref6.scaleX,\n      scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n      _ref6$scaleY = _ref6.scaleY,\n      scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n  var aspectRatio = _ref7.aspectRatio,\n      naturalWidth = _ref7.naturalWidth,\n      naturalHeight = _ref7.naturalHeight;\n  var _ref8$fillColor = _ref8.fillColor,\n      fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n      imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n      imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n      _ref8$maxWidth = _ref8.maxWidth,\n      maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n      _ref8$maxHeight = _ref8.maxHeight,\n      maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n      _ref8$minWidth = _ref8.minWidth,\n      minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n      _ref8$minHeight = _ref8.minHeight,\n      minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  var maxSizes = getAdjustedSizes({\n    aspectRatio: aspectRatio,\n    width: maxWidth,\n    height: maxHeight\n  });\n  var minSizes = getAdjustedSizes({\n    aspectRatio: aspectRatio,\n    width: minWidth,\n    height: minHeight\n  }, 'cover');\n  var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n  var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n  // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n  var destMaxSizes = getAdjustedSizes({\n    aspectRatio: imageAspectRatio,\n    width: maxWidth,\n    height: maxHeight\n  });\n  var destMinSizes = getAdjustedSizes({\n    aspectRatio: imageAspectRatio,\n    width: minWidth,\n    height: minHeight\n  }, 'cover');\n  var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n  var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n  var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n  canvas.width = normalizeDecimalNumber(width);\n  canvas.height = normalizeDecimalNumber(height);\n  context.fillStyle = fillColor;\n  context.fillRect(0, 0, width, height);\n  context.save();\n  context.translate(width / 2, height / 2);\n  context.rotate(rotate * Math.PI / 180);\n  context.scale(scaleX, scaleY);\n  context.imageSmoothingEnabled = imageSmoothingEnabled;\n  context.imageSmoothingQuality = imageSmoothingQuality;\n  context.drawImage(image, ...params.map((param) => Math.floor(normalizeDecimalNumber(param))));\n\n  context.restore();\n  return canvas;\n}\nvar fromCharCode = String.fromCharCode;\n/**\n * Get string from char code in data view.\n * @param {DataView} dataView - The data view for read.\n * @param {number} start - The start index.\n * @param {number} length - The read length.\n * @returns {string} The read result.\n */\n\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  length += start;\n\n  for (var i = start; i < length; i += 1) {\n    str += fromCharCode(dataView.getUint8(i));\n  }\n\n  return str;\n}\nvar REGEXP_DATA_URL_HEAD = /^data:.*,/;\n/**\n * Transform Data URL to array buffer.\n * @param {string} dataURL - The Data URL to transform.\n * @returns {ArrayBuffer} The result array buffer.\n */\n\nfunction dataURLToArrayBuffer(dataURL) {\n  var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n  var binary = atob(base64);\n  var arrayBuffer = new ArrayBuffer(binary.length);\n  var uint8 = new Uint8Array(arrayBuffer);\n  forEach(uint8, function (value, i) {\n    uint8[i] = binary.charCodeAt(i);\n  });\n  return arrayBuffer;\n}\n/**\n * Transform array buffer to Data URL.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n * @param {string} mimeType - The mime type of the Data URL.\n * @returns {string} The result Data URL.\n */\n\nfunction arrayBufferToDataURL(arrayBuffer, mimeType) {\n  var chunks = []; // Chunk Typed Array for better performance (#435)\n\n  var chunkSize = 8192;\n  var uint8 = new Uint8Array(arrayBuffer);\n\n  while (uint8.length > 0) {\n    // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n    // eslint-disable-next-line prefer-spread\n    chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n    uint8 = uint8.subarray(chunkSize);\n  }\n\n  return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n}\n/**\n * Get orientation value from given array buffer.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n * @returns {number} The read orientation value.\n */\n\nfunction resetAndGetOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var orientation; // Ignores range error when the image does not have correct Exif information\n\n  try {\n    var littleEndian;\n    var app1Start;\n    var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n    if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n      var length = dataView.byteLength;\n      var offset = 2;\n\n      while (offset + 1 < length) {\n        if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n          app1Start = offset;\n          break;\n        }\n\n        offset += 1;\n      }\n    }\n\n    if (app1Start) {\n      var exifIDCode = app1Start + 4;\n      var tiffOffset = app1Start + 10;\n\n      if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n        var endianness = dataView.getUint16(tiffOffset);\n        littleEndian = endianness === 0x4949;\n\n        if (littleEndian || endianness === 0x4D4D\n        /* bigEndian */\n        ) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n      }\n    }\n\n    if (ifdStart) {\n      var _length = dataView.getUint16(ifdStart, littleEndian);\n\n      var _offset;\n\n      var i;\n\n      for (i = 0; i < _length; i += 1) {\n        _offset = ifdStart + i * 12 + 2;\n\n        if (dataView.getUint16(_offset, littleEndian) === 0x0112\n        /* Orientation */\n        ) {\n            // 8 is the offset of the current tag's value\n            _offset += 8; // Get the original orientation value\n\n            orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n      }\n    }\n  } catch (error) {\n    orientation = 1;\n  }\n\n  return orientation;\n}\n/**\n * Parse Exif Orientation value.\n * @param {number} orientation - The orientation to parse.\n * @returns {Object} The parsed result.\n */\n\nfunction parseOrientation(orientation) {\n  var rotate = 0;\n  var scaleX = 1;\n  var scaleY = 1;\n\n  switch (orientation) {\n    // Flip horizontal\n    case 2:\n      scaleX = -1;\n      break;\n    // Rotate left 180��\n\n    case 3:\n      rotate = -180;\n      break;\n    // Flip vertical\n\n    case 4:\n      scaleY = -1;\n      break;\n    // Flip vertical and rotate right 90��\n\n    case 5:\n      rotate = 90;\n      scaleY = -1;\n      break;\n    // Rotate right 90��\n\n    case 6:\n      rotate = 90;\n      break;\n    // Flip horizontal and rotate right 90��\n\n    case 7:\n      rotate = 90;\n      scaleX = -1;\n      break;\n    // Rotate left 90��\n\n    case 8:\n      rotate = -90;\n      break;\n\n    default:\n  }\n\n  return {\n    rotate: rotate,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n\n    return {\n        isNaN: isNaN,\n        isNumber: isNumber,\n        isPositiveNumber: isPositiveNumber,\n        isUndefined: isUndefined,\n        isObject: isObject,\n        isPlainObject: isPlainObject,\n        isFunction: isFunction,\n        toArray: toArray,\n        forEach: forEach,\n        assign: assign,\n        normalizeDecimalNumber: normalizeDecimalNumber,\n        setStyle: setStyle,\n        hasClass: hasClass,\n        addClass: addClass,\n        removeClass: removeClass,\n        toggleClass: toggleClass,\n        toParamCase: toParamCase,\n        getData: getData,\n        setData: setData,\n        removeData: removeData,\n        removeListener: removeListener,\n        addListener: addListener,\n        dispatchEvent: dispatchEvent,\n        getOffset: getOffset,\n        isCrossOriginURL: isCrossOriginURL,\n        addTimestamp: addTimestamp,\n        getTransforms: getTransforms,\n        getMaxZoomRatio: getMaxZoomRatio,\n        getPointer: getPointer,\n        getPointersCenter: getPointersCenter,\n        getAdjustedSizes: getAdjustedSizes,\n        getRotatedSizes: getRotatedSizes,\n        getSourceCanvas: getSourceCanvas,\n        getStringFromCharCode: getStringFromCharCode,\n        dataURLToArrayBuffer: dataURLToArrayBuffer,\n        arrayBufferToDataURL: arrayBufferToDataURL,\n        resetAndGetOrientation: resetAndGetOrientation,\n        parseOrientation: parseOrientation\n    };\n});"]}